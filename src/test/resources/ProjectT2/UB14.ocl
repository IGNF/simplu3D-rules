package  fr::ign::cogit::simplu3d::model::application


--context Building
--inv: Road.allInstances()->select(r | r.name='RTE DU RHIN')->exists(r | r.getAxis()->exists(g | self.getFootprint().distance(g)->min() < 20))
-- 
--select(r | r.name='RTE DU RHIN')->

--context Building
--inv: self.height(1,2) < 28



--context Building
--inv: self.isNew implies self.getbPU().getCadastralParcel().getSpecificCadastralBoundary()->select(s | s.type=0 or s.type= 1).geom.distance(self.getFootprint())->min()>6


--context Building
--inv: self.isNew implies self.getbPU().getCadastralParcel().getSpecificCadastralBoundary()->select(s | s.type=0 or s.type= 1)->forAll(bord| bord.prospect(self,0.5,0))


--context BasicPropertyUnit
--inv: self.getBuildings()->select(isNew).forAll(b1, b2 | b1 <> b2 implies b1.getFootprint().distance(b2.getFootprint()) > 3)

--context SubParcel
--inv: self.getces() <= 0.8

--context BasicPropertyUnit
--inv: self.getBuildings()->select(isNew).forAll(b1, b2 | b1 <> b2 implies b1.getFootprint().distance(b2.getFootprint()) > 3)

--(self.type=0 or self.type= 1) implies (Building.allInstances()->select(isNew)->forAll(b | self.prospect(b,0.5,0)))

endpackage
